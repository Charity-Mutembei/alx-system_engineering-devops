#!/usr/bin/env bash
#install nginx on my web-01
#update the package and the install
apt-get update -y
apt-get install nginx -y
# Configure nginx to listen on port 80
sudo sed -i 's/listen 80 default_server;/listen 80;/' /etc/nginx/sites-available/default
# Restart nginx without using systemctl
sudo service nginx restart
# Create a temporary file to hold the expected output
temp_file=$(mktemp)
echo "Hello World!" > "$temp_file"
# Use curl to query nginx and check if it returns the expected output
curl_output=$(curl -s http://localhost/)
expected_output=$(cat "$temp_file")
# Clean up the temporary file
rm "$temp_file"
